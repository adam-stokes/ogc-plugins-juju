meta:
  name: build spec
  description: tasks for runner plugin

plan:
  - runner:
      description: install dev requirements
      cmd: pip install -rrequirements_dev.txt
      tags: [dist, bdist]
  - runner:
      description: prettyify
      cmd: black .
      tags: [dist, bdist]
  - runner:
      description: isort
      cmd: isort -rc -m 3 .
      tags: [dist, bdist]
  - runner:
      description: lint
      cmd: pylint ogc_plugins_juju.py
      tags: [dist, bdist]
  - runner:
      description: Test plugin
      cmd: pytest
      tags: [dist, bdist]
  - runner:
      description: Bump revision
      cmd: punch --part patch
      tags: [bdist]
  - runner:
      description: Build dist
      cmd: python3 setup.py bdist_wheel
      tags: [bdist]
  - runner:
      description: Upload dist
      cmd: twine upload dist/*
      tags: [bdist, publish]
  - runner:
      description: cleanup artifacts
      cmd: rm -rf build dist ogc_plugins_env.egg-info __pycache__
      tags: [dist, clean, bdist]
